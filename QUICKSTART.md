# 快速开始指南

## 第一步：安装依赖

```bash
# 在项目根目录
npm run install:all
```

如果遇到问题，可以分别安装：

```bash
npm install
cd server && npm install
cd ../client && npm install
```

## 第二步：初始化数据库

```bash
cd server

# 1. 生成Prisma客户端
npm run prisma:generate

# 2. 创建数据库（首次运行会自动创建）
npm run prisma:migrate

# 3. 初始化初始数据（服装种类数据）
npm run init:data
```

## 第三步：启动应用

### 方式一：同时启动前后端（推荐）

在项目根目录：

```bash
npm run dev
```

### 方式二：分别启动

**终端1 - 启动后端：**
```bash
cd server
npm run dev
```

**终端2 - 启动前端：**
```bash
cd client
npm run dev
```

## 第四步：访问应用

打开浏览器访问：http://localhost:5173

## 使用说明

### 1. 添加颜色

在主界面顶部有"颜色管理"区域，可以添加、编辑、删除颜色。

### 2. 管理服装种类

点击顶部导航栏的"服装种类管理"，可以添加、编辑、删除服装种类及其属性、备注。

### 3. 创建订单并计算

1. 选择服装种类
2. 选择属性（备注会自动填充）
3. 配置原料信息（至少一种线种类，包括一轴线长和线单价）
4. 添加订单详情（至少一种颜色和数量）
5. 输入测量数据（至少一种工艺）
6. 点击"计算"按钮
7. 查看计算结果和采购数量表格
8. 点击"导出Excel"导出订单数据

### 4. 查看历史订单

点击顶部导航栏的"历史订单"，可以查看、导出、删除历史订单。

## 测试数据示例

根据PRD中的测试用例，可以使用以下数据测试：

**订单信息：**
- 服装种类：冲锋衣
- 属性：挂里
- 备注：正常拼接挂里（自动生成）

**原料信息：**
- 线种类1：平车线 - 一轴线长：2700米 - 线单价：2.2元/轴
- 线种类2：丝光线 - 一轴线长：5000米 - 线单价：4元/轴

**订单详情：**
- 红色：100件
- 蓝色：200件
- 黑色：400件
- 绿色：100件

**测量数据：**
- 平车：70米
- 三线：20米
- 其他工艺：留空

**预期结果：**
- 平车工艺线费：0.21元（所有颜色）
- 三线工艺线费：0.23元（所有颜色）
- 单件线费：0.44元

## 常见问题

### 端口被占用

如果3000或5173端口被占用：

**后端端口：** 修改 `server/.env` 文件（如果不存在则创建）：
```
PORT=3001
```

**前端端口：** 修改 `client/vite.config.ts`：
```typescript
server: {
  port: 5174,
  // ...
}
```

### 数据库连接错误

确保：
1. 已经运行了 `npm run prisma:generate`
2. 已经运行了 `npm run prisma:migrate`
3. `server/dev.db` 文件存在（首次运行迁移后自动创建）

### CORS错误

确保后端CORS配置包含前端URL，或使用前端代理（已配置在vite.config.ts中）。

### 计算错误

检查：
1. 是否至少配置了一种线种类
2. 是否至少添加了一种颜色的订单详情
3. 是否至少输入了一种工艺的测量数据
4. 所有数值输入是否大于0

## 下一步

测试完成后，如果发现问题或需要调整，请告诉我，我会根据您的反馈进行修改和完善。

